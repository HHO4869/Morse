<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>เกมทายรหัสมอร์ส</title>
  <style>
    body { font-family: sans-serif; text-align: center; background: #222; color: #eee; padding: 20px; }
    .container { display: flex; justify-content: center; gap: 30px; margin-top: 30px; }
    .barrel {
      font-size: 80px;
      cursor: pointer;
      transition: transform 0.2s;
      position: relative;
      width: 100px;
      height: 100px;
      display: flex;
      align-items: center;
      justify-content: center;
      background: #444;
      border-radius: 10px;
    }
    .barrel:hover { transform: scale(1.1); background: #666; }
    .hint {
      position: absolute;
      bottom: -30px;
      width: 100%;
      font-size: 14px;
      color: #0f0;
      opacity: 1;
      transition: opacity 0.2s;
      word-break: break-word;
    }
    .hidden .hint {
      opacity: 0;
    }
    #result {
      margin-top: 20px;
      font-size: 24px;
      font-weight: bold;
    }
    button {
      margin-top: 20px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>
  <h1>🔍 ทายรหัสมอร์ส!</h1>
  <div class="container" id="barrelContainer">
    <div class="barrel"><div>🪣</div><div class="hint"></div></div>
    <div class="barrel"><div>🪣</div><div class="hint"></div></div>
    <div class="barrel"><div>🪣</div><div class="hint"></div></div>
  </div>
  <div id="result"></div>
  <button onclick="startGame()">▶️ เริ่ม</button>

  <script>
    const morse = ".... ..--- --- .._. .-.. ..- --. -. .- --";
    const messages = ["ถูกต้อง! H2O_Lugnam", "ยังไม่ถูกนะ ลองใหม่!", "ยังไม่ใช่คำนี้"];
    let answerIndex = Math.floor(Math.random() * 3);
    let barrels = document.querySelectorAll('.barrel');

    function reveal(index) {
      const res = document.getElementById("result");
      res.innerText = (index === answerIndex) ? messages[0] : messages[Math.floor(Math.random() * (messages.length - 1)) + 1];
    }

    function showHint() {
      barrels.forEach((el, idx) => {
        const hintEl = el.querySelector('.hint');
        hintEl.textContent = (idx === answerIndex) ? morse : "";
        el.classList.remove("hidden");
      });
    }

    function hideHint() {
      barrels.forEach(el => {
        el.classList.add("hidden");
      });
    }

    function startGame() {
      hideHint();
      document.getElementById("result").innerText = "";
      let times = Math.floor(Math.random() * 6) + 10; // 10–15
      let count = 0;

      const interval = setInterval(() => {
        answerIndex = Math.floor(Math.random() * 3);
        updateHint();
        count++;
        if (count >= times) {
          clearInterval(interval);
        }
      }, 150);
    }

    function updateHint() {
      barrels.forEach((el, idx) => {
        const hintEl = el.querySelector('.hint');
        hintEl.textContent = (idx === answerIndex) ? morse : "";
      });
    }

    // Initial hint preview
    showHint();
  </script>
</body>
</html>
